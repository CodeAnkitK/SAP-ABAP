*&---------------------------------------------------------------------*
*&  Include           ZFI_VENDOR_SERVICETAX_V2_TOP
*&---------------------------------------------------------------------*

TYPE-POOLS : slis,truxs.
TABLES : bsis,bkpf,lfa1.
TABLES : zcm_doch, zcm_dm_epi, anlu, anla, zcm_mast, zcm_movie.
*---------------------------------------------------------------------*
*                        TYPES
*---------------------------------------------------------------------*
TYPES: BEGIN OF ty_data,
         bukrs          TYPE bsis-bukrs,
         hkont          TYPE bsis-hkont,
         txt20          TYPE txt20_skat,
         gjahr          TYPE bsis-gjahr,     
         belnr          TYPE bkpf-belnr,
         buzei          TYPE buzei,
         witht          TYPE witht,
         witht_desc     TYPE txt40,      
         wt_withcd      TYPE wt_withcd,
         wt_withcd_desc TYPE txt40,  
         wt_qbshh       TYPE with_item-wt_qbshh,
         wt_qsshh       TYPE with_item-wt_qsshh,
         qsatz          TYPE wt_qsatz,
         inv_type       TYPE string,
         ebeln          TYPE bseg-ebeln,      
         inv            TYPE bseg-belnr,
         inv_gjahr      TYPE bseg-gjahr,                    
         inv_date       TYPE bkpf-budat,
         xref2          TYPE bseg-xref2,
         xref3          TYPE bseg-xref3,
         hwbas          TYPE hwbas_bses,
         fwbas          TYPE fwbas_bses,
         hwste          TYPE hwste,
         fwste          TYPE fwste,
         sgtxt          TYPE bsis-sgtxt,
         lifnr          TYPE lfa1-lifnr,
         name1          TYPE lfa1-name1,
         stcd3          TYPE lfa1-stcd3, 
         land1          TYPE lfa1-land1, 
         j_1ipanno      TYPE j_1imovend-j_1ipanno,
         address        TYPE string,
         dmbtr          TYPE bsik-dmbtr,
         wrbtr          TYPE bsis-wrbtr,
         budat          TYPE bsik-budat,
         mwskz          TYPE mwskz,
         cmmas          TYPE string,            
         progid         TYPE zcm_doch-prog_id, 
         epiid          TYPE zcm_dm_epi-epi_id,
         ownid          TYPE anlu-owner_chnl,   
         dm_no          TYPE zcm_dm_epi-doc_no, 
         anln1          TYPE anla-anln1,       
         anln2          TYPE anla-anln2,        
         txt50          TYPE anla-txt50,        
         bktxt          TYPE bkpf-bktxt,
         ldgrp          TYPE bkpf-ldgrp,
         blart          TYPE bkpf-blart,
         augbl          TYPE bsis-augbl,
         augdt          TYPE bsik-augdt,
         xblnr          TYPE bsis-xblnr,
         kostl          TYPE bsis-kostl,
         projk          TYPE bsis-projk,
         usnam          TYPE bkpf-usnam,
         vbund          TYPE bsis-vbund,
         bldat          TYPE bsis-bldat,
         cpudt          TYPE bkpf-cpudt,
         hwaer          TYPE bkpf-hwaer,
         waers          TYPE bsik-waers,
         gkont          TYPE bseg-hkont, 
         g_desc         TYPE skat-txt20,
         tds_bal        TYPE bsis-wrbtr, 
         gl_bal         TYPE bsis-wrbtr, 
         stblg          TYPE bkpf-stblg,       
         stjah          TYPE bkpf-stjah,       
         rev_date       TYPE budat, 
         zuonr          TYPE dzuonr, 
         prctr          TYPE bseg-prctr, 
         segment        TYPE bseg-segment,
       END OF ty_data.

TYPES: BEGIN OF ty_bseg_add,
         bukrs   TYPE bukrs,
         belnr   TYPE belnr_d,
         gjahr   TYPE gjahr,
         buzei   TYPE buzei6,
         bstat   TYPE bstat_d,
         buzid   TYPE buzid,
         bschl   TYPE bschl,
         koart   TYPE koart,
         shkzg   TYPE shkzg,
         mwskz   TYPE mwskz,
         dmbtr   TYPE bf_dmbtr,
         wrbtr   TYPE bf_wrbtr,
         zuonr   TYPE dzuonr,
         sgtxt   TYPE sgtxt,
         vbund   TYPE vbund,
         kostl   TYPE kostl,
         hkont   TYPE hkont,
         prctr   TYPE prctr,
         projk   TYPE ps_psp_pnr,
         segment TYPE bseg_add-segment,
         pswsl   TYPE pswsl,
         augbl   TYPE augbl,
       END OF ty_bseg_add.

TYPES: BEGIN OF ty_bset,
         bukrs TYPE bukrs,
         belnr TYPE belnr_d,
         gjahr TYPE gjahr,
         buzei TYPE buzei,
         mwskz TYPE mwskz,
         hkont TYPE hkont,
         txgrp TYPE txgrp,
         shkzg TYPE shkzg,
         hwbas TYPE hwbas_bses,
         fwbas TYPE fwbas_bses,
         hwste TYPE hwste,
         fwste TYPE fwste,
       END OF ty_bset.

TYPES: BEGIN OF ty_bsis,
         bukrs TYPE bukrs,
         hkont TYPE hkont,
         augdt TYPE bsis-augdt,
         augbl TYPE bsis-augbl,
         zuonr TYPE dzuonr,
         gjahr TYPE gjahr,
         belnr TYPE belnr_d,
         buzei TYPE buzei,
         budat TYPE budat,
         bldat TYPE bldat,
         waers TYPE waers,
         xblnr TYPE xblnr1,
         blart TYPE blart,
         monat TYPE monat,
         bschl TYPE bschl,
         shkzg TYPE shkzg,
         mwskz TYPE mwskz,      
         dmbtr TYPE dmbtr,
         wrbtr TYPE wrbtr,
         sgtxt TYPE bsis-sgtxt,
         kostl TYPE bsis-kostl,
         vbund TYPE bsis-vbund,
         projk TYPE bsis-projk,
       END OF ty_bsis.

TYPES: BEGIN OF ty_bkpf,
         bukrs TYPE bukrs,
         belnr TYPE belnr_d,
         gjahr TYPE gjahr,
         blart TYPE blart,
         bldat TYPE bldat,
         budat TYPE budat,
         cpudt TYPE bkpf-cpudt,
         monat TYPE monat,
         awkey TYPE awkey,
         bktxt TYPE bkpf-bktxt,
         bstat TYPE bkpf-bstat,
         usnam TYPE bkpf-usnam,
         xblnr TYPE bkpf-xblnr,
         hwaer TYPE bkpf-hwaer,
         ldgrp TYPE bkpf-ldgrp,
         mblnr TYPE mblnr,
         mjahr TYPE mjahr,
         stblg TYPE bkpf-stblg,       
         stjah TYPE bkpf-stjah,        
         tcode TYPE bkpf-tcode,       
       END OF ty_bkpf.

TYPES: BEGIN OF ty_bkpf_po,
         bukrs TYPE bukrs,
         belnr TYPE belnr_d,
         gjahr TYPE gjahr,
         blart TYPE blart,
         bldat TYPE bldat,
         budat TYPE budat,
         cpudt TYPE bkpf-cpudt,
         monat TYPE monat,
         awkey TYPE awkey,
         bktxt TYPE bkpf-bktxt,
         bstat TYPE bkpf-bstat,
         usnam TYPE bkpf-usnam,
         xblnr TYPE bkpf-xblnr,
         hwaer TYPE bkpf-hwaer,
         ldgrp TYPE bkpf-ldgrp,
         mblnr TYPE mblnr,
         mjahr TYPE mjahr,
       END OF ty_bkpf_po.


TYPES : BEGIN OF ty_bsik,
          bukrs	TYPE bukrs,
          lifnr	TYPE lifnr,
          augdt	TYPE augdt,
          augbl	TYPE augbl,
          gjahr	TYPE gjahr,
          belnr	TYPE belnr_d,
          buzei	TYPE buzei,
          budat	TYPE budat,
          bldat	TYPE bldat,
          blart	TYPE blart,
          monat	TYPE monat,
          dmbtr	TYPE dmbtr,
          wrbtr	TYPE wrbtr,
        END OF ty_bsik.

TYPES: BEGIN OF ty_lfa1,
         lifnr TYPE lifnr,
         name1 TYPE name1_gp,
         adrnr TYPE adrnr,
         stcd3 TYPE stcd3,
         land1 TYPE land1,
       END OF ty_lfa1.

TYPES: BEGIN OF ty_adrc,
         addrnumber TYPE adrc-addrnumber,
         name1      TYPE adrc-name1,
         city1      TYPE ad_city1,
       END OF ty_adrc.

TYPES: BEGIN OF ty_with_item,
         bukrs     TYPE bukrs,
         belnr     TYPE belnr_d,
         gjahr     TYPE gjahr,
         witht     TYPE witht,
         wt_withcd TYPE wt_withcd,
         wt_qsshh  TYPE with_item-wt_qsshh,
         wt_qbshh  TYPE with_item-wt_qbshh,
         qsatz     TYPE wt_qsatz,
         buzei     TYPE buzei,
       END OF ty_with_item.

TYPES: BEGIN OF ty_mseg,
         mblnr TYPE mblnr,
         mjahr TYPE mjahr,
         lfbja TYPE lfbja,
         lfbnr TYPE lfbnr,
         lfpos TYPE lfpos,
       END OF ty_mseg.
TYPES: BEGIN OF ty_rseg,
         belnr TYPE belnr_d,
         gjahr TYPE gjahr,
         lfbnr TYPE lfbnr,
         lfgja TYPE rseg-lfgja,
         awkey TYPE awkey,
       END OF ty_rseg.
*TYPES: BEGIN OF ty_t059p,
*      LAND1  TYPE LAND1,
*      WITHT  TYPE WITHT,
TYPES: BEGIN OF ty_mils,
         belnr     TYPE bkpf-belnr,
         gjahr     TYPE bkpf-gjahr,
         inv_doc   TYPE bkpf-belnr,
         inv_yr    TYPE bkpf-gjahr,
         transtext TYPE  zcm_account-transtext,
       END OF ty_mils.


TYPES : BEGIN OF ty_collect,
          bukrs TYPE bsis-bukrs,
          gjahr TYPE bsis-gjahr,
          belnr TYPE bsis-belnr,
          dmbtr TYPE bsis-dmbtr,
        END OF ty_collect.

TYPES : BEGIN OF ty_bseg,
          bukrs   TYPE bseg-bukrs,
          belnr   TYPE bseg-belnr,
          gjahr   TYPE bseg-gjahr,
          buzei   TYPE bseg-buzei,
*         zuonr TYPE bseg-zuonr,
          ebeln   TYPE bseg-ebeln,
          ebelp   TYPE bseg-ebelp,
          prctr   TYPE bseg-prctr,
          segment TYPE bseg-segment, 
          xref2   TYPE bseg-xref2,
          xref3   TYPE bseg-xref3,
        END OF ty_bseg.

DATA : gt_bseg  TYPE STANDARD TABLE OF ty_bseg,
       gv_index TYPE sy-tabix.

DATA : gt_setleaf TYPE STANDARD TABLE OF setleaf,
       gt_collect TYPE STANDARD TABLE OF ty_collect,
       gs_collect TYPE ty_collect,
       gs_setleaf TYPE setleaf.

*----------------------------------------------------------------------*
*                       INTERNAL TABLES
*----------------------------------------------------------------------*
DATA: gt_mils TYPE TABLE OF ty_mils,
      gs_mils TYPE ty_mils.
DATA: gt_inv_data TYPE TABLE OF ty_mils,
      gs_inv_data TYPE ty_mils.
DATA: gt_mseg       TYPE TABLE OF ty_mseg,
      gs_mseg       TYPE ty_mseg,
      gt_rseg       TYPE TABLE OF ty_rseg,
      gs_rseg       TYPE ty_rseg,
      gt_with_item  TYPE TABLE OF ty_with_item,
      gt_with_item1 TYPE TABLE OF ty_with_item,     
      gt_with_item2 TYPE TABLE OF ty_with_item,     
      gt_t059u      TYPE TABLE OF t059u,            
      gt_t059zt     TYPE TABLE OF t059zt,          
      gs_with_item  TYPE ty_with_item.
DATA: gt_j_1imovend TYPE TABLE OF j_1imovend,
      gs_j_1imovend TYPE j_1imovend.
DATA: gt_lfa1 TYPE TABLE OF ty_lfa1,
      gs_lfa1 TYPE ty_lfa1,
      gt_adrc TYPE TABLE OF ty_adrc,
      gs_adrc TYPE ty_adrc.
DATA: gt_skat  TYPE TABLE OF skat,
      gt_skat1 TYPE TABLE OF skat, 
      gs_skat  TYPE skat.
DATA: gt_bsis       TYPE TABLE OF ty_bsis,
      gt_bsis_temp  TYPE TABLE OF ty_bsis,
      gt_bsis_gl    TYPE TABLE OF ty_bsis,
*      gt_bsis_gl1 TYPE TABLE OF ty_bsis,
      gt_bsis_doc   TYPE TABLE OF ty_bsis,
      gs_bsis_doc   TYPE ty_bsis,
      gs_bsis       TYPE ty_bsis,
      gt_bkpf       TYPE TABLE OF ty_bkpf,
      gt_bkpf_inv   TYPE TABLE OF ty_bkpf,
      gt_bkpf_1     TYPE TABLE OF ty_bkpf,
      gt_bkpf_po    TYPE TABLE OF ty_bkpf_po,
      gt_bkpf_po_1  TYPE TABLE OF ty_bkpf,
      gt_bkpf_temp  TYPE TABLE OF ty_bkpf,
      gs_bkpf       TYPE ty_bkpf,
      gs_bkpf_po    TYPE ty_bkpf_po,
      gt_bsik       TYPE TABLE OF ty_bsik,
      gs_bsik       TYPE ty_bsik,
      gt_term_mils  TYPE TABLE OF zcm_dm_term_mils,
      gs_term_mils  TYPE zcm_dm_term_mils,
      gt_vc_mils    TYPE TABLE OF zcm_dm_vc_mils,
      gs_vc_mils    TYPE zcm_dm_vc_mils,
      gt_ar_mils    TYPE TABLE OF zcm_dm_ar_mils,
      gs_ar_mils    TYPE zcm_dm_ar_mils,
      gt_trp_doc    TYPE TABLE OF zcm_trp_doc,
      gs_trp_doc    TYPE zcm_trp_doc,
      gt_dolby_doc  TYPE TABLE OF zcm_dolby_doc,
      gs_dolby_doc  TYPE zcm_dolby_doc,
      gt_ldcedi_doc TYPE TABLE OF zcm_ldcedi_doc,
      gs_ldcedi_doc TYPE zcm_ldcedi_doc,
      gt_acct       TYPE TABLE OF zcm_account,
      gs_acct       TYPE zcm_account,
      gt_bset       TYPE TABLE OF ty_bset,
      gt_bset_temp  TYPE TABLE OF ty_bset,
      gs_bset       TYPE ty_bset,
      gt_data       TYPE TABLE OF ty_data,
      gt_final      TYPE TABLE OF ty_data,
      gs_data       TYPE ty_data,
      gs_data_temp  TYPE ty_data,
      gt_bseg_add   TYPE TABLE OF ty_bseg_add,
      gs_bseg_add   TYPE ty_bseg_add.

DATA: gt_dm_epi TYPE STANDARD TABLE OF zcm_dm_epi.
DATA: gs_dm_epi TYPE zcm_dm_epi.

*----------------------------------------------------------------------*
*                       Constant
*----------------------------------------------------------------------*
CONSTANTS: gc_formname_top_of_page TYPE slis_formname VALUE 'TOP_OF_PAGE',
           g_user_command          TYPE slis_formname   VALUE 'USER_COMMAND',
           g_status                TYPE slis_formname   VALUE 'SET_PF_STATUS'.

CONSTANTS: c_red(4)    TYPE c VALUE 'C610',
           c_green(4)  TYPE c VALUE 'C510',
           c_yellow(4) TYPE c VALUE 'C310',
           c_en(2)     TYPE c VALUE 'EN',        
           c_star(4)   TYPE c VALUE 'STAR',      
           c_x         TYPE c VALUE 'X',          
           c_sa        TYPE char2 VALUE 'SA',    
           c_ym        TYPE char2 VALUE 'YM',    
           c_cs        TYPE char2 VALUE 'CS',     
           c_in        TYPE char3 VALUE 'IN'.   
*----------------------------------------------------------------------*
* SOC: Deal Memo Additions "Added by Ankit
*----------------------------------------------------------------------*
TYPES: BEGIN OF ty_dealmemo,
         pspnr      TYPE zcm_dm_epi-pspnr,
         doc_no     TYPE zcm_dm_epi-doc_no,
         prog_id1   TYPE zcm_dm_epi-prog_id1,
         epi_id     TYPE zcm_dm_epi-epi_id,
         anln1      TYPE zcm_dm_epi-anln1,
         anln2      TYPE zcm_dm_epi-anln2,
         owner_chnl TYPE zcm_doch-owner_chnl,
         prog_nature TYPE string,
         txt50      TYPE anla-txt50,
         epiprog    TYPE zcm_dm_epi-epiprog,
         bukrs      TYPE bseg-bukrs,
         belnr      TYPE bseg-belnr,
         gjahr      TYPE bseg-gjahr,
       END OF ty_dealmemo.

DATA gt_dealmemo TYPE STANDARD TABLE OF ty_dealmemo.
DATA gw_dealmemo TYPE ty_dealmemo.
DATA: idd07v TYPE TABLE OF dd07v.
*----------------------------------------------------------------------*
* EOC: Deal Memo Additions "Added by Ankit
*----------------------------------------------------------------------*
